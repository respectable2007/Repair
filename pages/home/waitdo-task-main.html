<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/app.css"/>
		<style type="text/css">
		  .bages .mui-badge{
		  	padding: 6px 9px;
		  }
		  .mui-card{
		    box-shadow: 0 0 2px rgba(0,0,0,0.4);
		  }
		  .mui-popover .pop-head{
		  	height: 40px;
		  	background: #dfdfdf;
		  	text-align: center;
		  	position: relative;
		  	padding:8px 0;
		  }
		  .mui-popover .pop-head a{
		  	position: absolute;
            right: 4px;
            top: 6px;
            color: #000;
		  }
		  .mui-popover .pop-body{
		    height: 260px;
		    background: #fff;
		  }
		  .mui-popover .pop-body .mui-table-view{
		  	margin: 0;
		  }
		  .mui-popover .pop-body .mui-table-view .mui-table-view-cell{
		  	text-align: left;
		  }
		</style>
	</head>
	<body>
	  <div id='app'>
	  	<header class="mui-bar mui-bar-nav">
	  	  <a class="mui-icon mui-icon-left-nav mui-pull-left mui-action-back"></a>
	  	  <h1 class="mui-title">待处理任务</h1>
	  	  <div class="mui-segmented-control">
	  	  	<div class="divHeader">
	  	  	  <a v-for='(item,index) in menu'
	  	  	  	 class="mui-control-item">
	  	  	    <span></span>
	  	  	    <span class="round"></span>
	  	  	  </a>
	  	  	</div>
	  	  </div>
	  	</header>
	  	<div class="mui-content" id='pullRefresh'>
	  	  <div v-show='list.length'>
	  	  	<ul v-for='(item,index) in list'
	  	  		class="mui-table-view">
	  	  	  <li class="mui-table-view-cell">
	  	  	  	<div class="mui-card">
	  	  	  	  <div class="mui-card-header">
	  	  	  	  	工单号：{{item.orderNumber}}
	  	  	  	  </div>
	  	  	  	  <div class="mui-card-content">
	  	  	  	  	<div class="mui-card-content-inner">
	  	  	  	  	  <div class="bages">
	  	  	  	  	  	<span class="mui-badge mui-badge-green">奖励2{{item.money}}￥</span>
	  	  	  	  	  	<span class="mui-badge mui-badge-blue">1{{item.hour}}小时完成</span>
	  	  	  	  	  	<span class="mui-badge mui-badge-danger" v-if='item.IS_URGENCY'>紧急</span>
	  	  	  	  	  </div>
	  	  	  	  	  <div class="middle">
	  	  	  	  	  	<p>{{item.title}}</p>
	  	  	  	  	  	<p>{{item.msg}}</p>
	  	  	  	  	  </div>
	  	  	  	  	</div>
	  	  	  	  </div>
	  	  	  	  <div class="mui-card-footer">
	  	  	  	  	{{item.datetime}}
	  	  	  	  	<button type="button" class="mui-btn mui-btn-default"
	  	  	  	  		    @tap='handleDispatch(item)'>派工</button>
	  	  	  	  	<button type="button" class="mui-btn mui-btn-danger"
	  	  	  	  		    @tap='handleGrab(item)'>抢单</button>
	  	  	  	  </div>
	  	  	  	</div>
	  	  	  </li>
	  	  	</ul>
	  	  </div>
	  	  <div v-show='!list.length'
	  	  	   class="empty-container">
	  	  	<div class="nodata-info">
	  	  	  暂无任务处理
	  	  	</div>
	  	  </div>
	  	</div>
	  	<div id="pop" class="mui-popover mui-popover-bottom mui-popover-action">
		  	<div class="pop-head">
		  	  执行人员选择
		  	  <a href="#pop"
		  	  	 class="mui-icon mui-icon-close"></a>
		  	</div>
		  	<div class="pop-body">
		  	  <ul class="mui-table-view">
		  	  	<li class="mui-table-view-cell"
		  	  		v-for='(item, index) in staffs'>
		  	  	  <span v-html='item.typeName'></span>
		  	  	   目前任务量：
		  	  	  <span v-text='item.no'></span>
		  	  	  <!--<div class="mui-radio mui-right">-->
		  	  	  <input type="radio" :id='item.id' style="margin-right: 0;"/>
		  	  	  <!--</div>-->
		  	  	</li>
		  	  </ul>
		  	</div>
		  	<div class="pop-footer">
		  	   <button class="mui-btn mui-btn-block mui-btn-primary"
		  	   	       id='confirmBtn'
		  	   	       @tap='handleConfirm()'>
		  	   	       确认
		  	   </button>
		  	</div>
		  </div>
	  </div>
	  <script src="../../js/mui.min.js" type="text/javascript"></script>
	  <script src="../../js/libs/vue.min.js" type="text/javascript"></script>
	  <script type="text/javascript">
	    var ow = null,
	        app = new Vue({
	          el: '#app',
	          data: {
	          	menu: [],
	          	list: [{
	  	          orderNumber: 'afb1bc58-d829-89e3',
	  	          IS_URGENCY: true,
	  	          title: 'xx小区6栋1705号',
	  	          msg: '锁坏了',
	  	          datetime:'2018-11-25 13:05:35',
	  	          status: true
	  	        }],//任务列表
	  	        staffs: [{
	  	          typeName: '周周',
	  	          id: 1,
	  	          no: 0
	  	        }]//维修人员
	          },
	          mounted: function(){
	          	mui.init();
	          	mui.plusReady(function() {
	          	  window.addEventListener('tap', function(e) {
	          	  	console.log(e);
	          	  })
	          	})
	          },
	          methods: {
	          	handleDispatch:function(item) {
	          	  mui('#pop').popover('toggle');
	          	},
	          	handleClose: function() {
	          	  console.log(1);
	          	  mui('#pop').popover('hide');
	          	},
	          	handleGrab: function(item) {
	          	  console.log(2);
	          	},
	          	handleConfirm: function() {
	          	  mui('#pop').popover('toggle');
	          	}
	          }
	        });
	  </script>
	</body>
</html>
